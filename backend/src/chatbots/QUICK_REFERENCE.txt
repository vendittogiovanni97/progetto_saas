â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         QUICK REFERENCE GUIDE                              â•‘
â•‘                      Chatbots Module - Cheat Sheet                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸƒ TL;DR - 5 MINUTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Leggi START_HERE.txt
2. Integra routes nel gateway.ts
3. Test con curl
4. Implementa TODO items


ğŸ“ FILE PRINCIPALI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

START_HERE.txt          â† Inizio veloce (leggere PRIMO)
README.md               â† Documentazione completa
INTEGRATION_GUIDE.ts    â† Come integrare nel gateway
CHECKLIST.md            â† TODO list e pianificazione


ğŸ”Œ INTEGRAZIONE GATEWAY (COPY-PASTE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: backend/src/gateway.ts

Aggiungi import:
    import { chatbotRoutes } from './chatbots';

Aggiungi route:
    app.use('/api', chatbotRoutes);

Fatto! âœ“


ğŸ“Š MODELS - QUICK VIEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

IChatbot
â”œâ”€ id: ObjectId
â”œâ”€ name: string
â”œâ”€ welcomeMessage: string
â”œâ”€ systemPrompt?: string
â”œâ”€ primaryColor: string
â”œâ”€ userId: ObjectId
â””â”€ timestamps

IConversation
â”œâ”€ id: ObjectId
â”œâ”€ chatbotId: ObjectId
â”œâ”€ visitorId?: string
â””â”€ timestamps

IMessage
â”œâ”€ id: ObjectId
â”œâ”€ conversationId: ObjectId
â”œâ”€ role: 'user' | 'assistant'
â”œâ”€ content: string
â””â”€ createdAt


ğŸ› ï¸ SERVICES - METHOD SIGNATURES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ChatbotService:
  â€¢ createChatbot(userId, data) â†’ Promise<IChatbot>
  â€¢ getChatbotsByUserId(userId) â†’ Promise<IChatbot[]>
  â€¢ getChatbotById(id) â†’ Promise<IChatbot|null>
  â€¢ updateChatbot(id, data) â†’ Promise<IChatbot|null>
  â€¢ deleteChatbot(id) â†’ Promise<boolean>

ConversationService:
  â€¢ createConversation(chatbotId, visitorId?) â†’ Promise<IConversation>
  â€¢ getConversationsByChatbotId(chatbotId) â†’ Promise<IConversation[]>
  â€¢ getConversationById(id) â†’ Promise<IConversation|null>
  â€¢ deleteConversation(id) â†’ Promise<boolean>

MessageService:
  â€¢ createMessage(conversationId, role, content) â†’ Promise<IMessage>
  â€¢ getMessagesByConversationId(id) â†’ Promise<IMessage[]>
  â€¢ getLastMessages(id, limit?) â†’ Promise<IMessage[]>
  â€¢ deleteMessage(id) â†’ Promise<boolean>


ğŸŒ API ENDPOINTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CHATBOT:
  POST   /api/chatbots
    body: { name, welcomeMessage?, systemPrompt?, primaryColor? }
    
  GET    /api/chatbots
    
  GET    /api/chatbots/:id
    
  PUT    /api/chatbots/:id
    body: { name?, welcomeMessage?, systemPrompt?, primaryColor? }
    
  DELETE /api/chatbots/:id

CONVERSATION:
  POST   /api/chatbots/:chatbotId/conversations
    body: { visitorId? }
    
  GET    /api/chatbots/:chatbotId/conversations
    
  GET    /api/conversations/:id
    
  DELETE /api/conversations/:id

MESSAGE:
  POST   /api/conversations/:conversationId/messages
    body: { role: 'user'|'assistant', content }
    
  GET    /api/conversations/:conversationId/messages
    
  DELETE /api/messages/:id


ğŸ’¾ IMPORT MODELLI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import {
  Chatbot,
  Conversation,
  Message,
  type IChatbot,
  type IConversation,
  type IMessage,
} from './chatbots';


ğŸ’¼ IMPORT SERVICES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import {
  ChatbotService,
  ConversationService,
  MessageService,
} from './chatbots';

const chatbotService = new ChatbotService();
const conversationService = new ConversationService();
const messageService = new MessageService();


ğŸ“ IMPORT ROUTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import { chatbotRoutes } from './chatbots';

app.use('/api', chatbotRoutes);


ğŸ§ª TEST CON CURL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Create chatbot
curl -X POST http://localhost:5000/api/chatbots \
  -H "Content-Type: application/json" \
  -d '{"name":"Test Bot"}'

# List chatbots
curl http://localhost:5000/api/chatbots

# Get specific chatbot
curl http://localhost:5000/api/chatbots/ID

# Create conversation
curl -X POST http://localhost:5000/api/chatbots/CHATBOT_ID/conversations

# Send message
curl -X POST http://localhost:5000/api/conversations/CONV_ID/messages \
  -H "Content-Type: application/json" \
  -d '{"role":"user","content":"Hello"}'

# Get messages
curl http://localhost:5000/api/conversations/CONV_ID/messages


ğŸ¯ PRIMO USAGE PATTERN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// 1. Create chatbot
const chatbot = await chatbotService.createChatbot(userId, {
  name: 'My Bot',
  systemPrompt: 'You are helpful...',
});

// 2. Start conversation
const conversation = await conversationService.createConversation(
  chatbot._id,
  visitorId
);

// 3. Exchange messages
const userMsg = await messageService.createMessage(
  conversation._id,
  'user',
  'Hello'
);

// 4. Get history
const messages = await messageService.getMessagesByConversationId(
  conversation._id
);


âš ï¸ TODO PRIORITY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ CRITICAL (Fai subito):
  - Auth middleware
  - Ownership checks
  - Input validation

ğŸŸ¡ HIGH (Fai presto):
  - Error handling
  - Logging
  - Tests

ğŸŸ¢ MEDIUM (Quando puoi):
  - Paginazione
  - Caching
  - Analytics

âšª LOW (Future):
  - AI integration
  - Advanced features


ğŸ“‹ CHECKLIST INTEGRAZIONE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ Leggi START_HERE.txt
â–¡ Leggi INTEGRATION_GUIDE.ts
â–¡ Aggiungi import in gateway.ts
â–¡ Aggiungi routes in gateway.ts
â–¡ Test con curl
â–¡ Implementa auth middleware
â–¡ Implementa validazione input
â–¡ Scrivi tests
â–¡ Aggiungi logging
â–¡ Deploy!


ğŸ” COME TROVARE COSE NEL CODICE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cerca "TODO:"
  â†’ Trova tutti i TODO items (25+)

Cerca "interface I"
  â†’ Trova tutte le TypeScript interfaces

Cerca "async "
  â†’ Trova tutti i metodi async

Cerca "export"
  â†’ Trova tutti gli exports


ğŸ› DEBUGGING
â•â•â•â•â•â•â•â•â•â•â•â•â•

Se endpoint non funziona:
  1. Controlla che le routes siano importate in gateway.ts
  2. Controlla che MongoDB sia connesso
  3. Controlla i logs
  4. Usa curl per testare manualmente

Se compilation error:
  1. Assicurati types siano corretti
  2. Controlla imports/exports
  3. Runnare `npm run build`


âš¡ PERFORMANCE TIPS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ Usa getLastMessages() per AI context
â€¢ TODO: Implementare indici MongoDB
â€¢ TODO: Aggiungere caching Redis
â€¢ TODO: Implementare paginazione


ğŸ” SECURITY
â•â•â•â•â•â•â•â•â•â•â•

TODO: Implementare:
  â–¡ JWT authentication
  â–¡ Ownership verification
  â–¡ Input validation
  â–¡ Rate limiting
  â–¡ XSS protection
  â–¡ CSRF tokens


ğŸ“ˆ MONITORING
â•â•â•â•â•â•â•â•â•â•â•â•â•

TODO: Aggiungere:
  â–¡ Logging strutturato
  â–¡ Error tracking (Sentry)
  â–¡ Performance monitoring
  â–¡ Analytics conversazioni


ğŸ“ LEARNING PATH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Leggi START_HERE.txt
2. Studia ARCHITECTURE.ts
3. Analizza models/
4. Analizza services/
5. Analizza controllers/
6. Analizza routes/
7. Leggi EXAMPLES.ts
8. Implementa CHECKLIST.md


ğŸ†˜ HELP
â•â•â•â•â•â•â•â•â•

Domanda: Dove sono i modelli?
Risposta: backend/src/chatbots/models/

Domanda: Come uso i services?
Risposta: Vedi EXAMPLES.ts

Domanda: Come integro nel gateway?
Risposta: Vedi INTEGRATION_GUIDE.ts

Domanda: Cos'Ã¨ incluso e cosa no?
Risposta: Vedi README.md

Domanda: Quali sono i TODO?
Risposta: Ceruca "TODO:" o leggi CHECKLIST.md


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ READY TO GO!

Prossimo step: Leggi START_HERE.txt per 2 minuti
Poi integra nel gateway.ts (5 minuti)
Poi testa con curl (5 minuti)

Total time to first working endpoint: ~15 minuti

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
